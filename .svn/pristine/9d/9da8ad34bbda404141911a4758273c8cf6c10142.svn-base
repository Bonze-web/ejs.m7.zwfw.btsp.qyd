/*
 * @作者: 杨宗标
 * @创建时间: 2021-04-07 16:44:01
 * @修改时间: 2021-04-14 19:09:19
 * @版本: [1.0]
 * @版权: 国泰新点软件股份有限公司
 * @描述:
 */


(function(){

    "use strict";

    var calendar;

    Util.loadJs(
        'js/widgets/calendar/calendar.js',
        'js/widgets/calendar/calendar.css',
        function () {
            initListeners();
            initPage();
        });

    function initPage() {
        // var data3 = {
        //     list: [

        //     ]
        // }
        // var temple1 = Zepto('#template1').html();
        // var output = Mustache.render(temple1, data3);
        // Zepto('#exceed_list_box').html(output);
    }

    function transferDate(date) {
        // 年
        var year = date.getFullYear();
        // 月
        var month = date.getMonth() + 1;
        // 日
        var day = date.getDate();

        if(month >= 1 && month <= 9) {

            month = "0" + month;
        }
        if(day >= 0 && day <= 9) {

            day = "0" + day;
        }
        // day += 1;

        var dateString = year + '-' + month + '-' + day;
        return dateString;

    };
    /**
     * @description 初始化监听
     */
    function initListeners() {
        var warningguid = Util.getExtraDataByKey('warningguid') || '';
        var data = {
            token: 'Epoint_WebSerivce_**##0601',
            params: {
                rowguid: warningguid,
                loginid: '111111111111111111'
            }
        };
        Util.ajax({
            url: Config.serverUrl + 'tyzfxxfb/warning/getWaitHandleDetail',
            data: JSON.stringify(data),
            contentType: 'application/json',
            success: function(result) {
                var waithandle = result.custom.waithandle;
                var oDate = new Date(waithandle.warning_time);
                waithandle.warning_time = transferDate(oDate);

                var temple1 = Zepto('#template1').html();
                var output = Mustache.render(temple1, waithandle);
                Zepto('.page_bg').html(output);
            },
            error: function(error) {
                ejs.ui.toast(error);
            }
        });
    }

})(window)